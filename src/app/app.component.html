<main class="main">
  <section class="main__section">
    <div class="section__visualizer">
      <canvas
        #visualizerRef
        class="visualizer__canvas"
        width="450"
        height="450"
      ></canvas>
    </div>
    <div class="main__player">
      <audio
        #audioRef
        src="{{ this.fileUrl }}"
        (timeupdate)="onUpdateProgress(audioRef, progressRef)"
      ></audio>
      <div class="player__progress">
        <progress #progressRef class="progress__bar" max="1"></progress>
        <div class="progress__time">
          <span>{{ this.currentTime }} </span>
          <span>{{ this.duration }}</span>
        </div>
      </div>
      <div class="player__control">
        <button
          type="button"
          class="control__play-button"
          (click)="playSound(audioRef)"
        >
          @if (this.isPlay) {
            <svg viewBox="0 0 24 24" width="24" height="24">
              <path d="M6 4h4v16H6zm8 0h4v16h-4z" />
            </svg>
          } @else {
            <svg viewBox="0 0 24 24" width="24" height="24">
              <path d="M8 5v14l11-7z" />
            </svg>
          }
        </button>
        <input
          type="range"
          value="100"
          #volumeRef
          class="control__volume"
          (input)="onChangeVolume(audioRef, volumeRef)"
          (change)="onChangeVolume(audioRef, volumeRef)"
        />
      </div>
      <input
        type="file"
        accept="audio/*"
        #fileRef
        class="player__file-input"
        (change)="onFileSelected(fileRef)"
      />
    </div>
  </section>
</main>
